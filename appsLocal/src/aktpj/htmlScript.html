<script>
 window.addEventListener("load",function(){
 document.getElementById("machinedata").style.display = "none";
},false);


/**
 * データベースより照合します
 *@pram{obj} フォームオブジェクト 
 *@return{void}
 */  
function SendForm(parentNode){
    document.getElementById("search").style.display = "none";
    var mgrn = parentNode.mgrn.value
    google.script.run.withSuccessHandler(success).mydatabese(mgrn);
    //document.getElementById("List").innerHTML = mgrn
    //return machineNumber
} 

/**
 * コールバック関数
 *@pram{String} 管理番号 
 *@return{void}
 */  
function success(mgrn){
  var json = JSON.parse(mgrn);
  if(json.auth == "nodata"){
    document.getElementById("machinedata").style.display = "block";
    document.getElementById("List").innerHTML = "ファイルがありませんフォームにデータを入力して下さい" 
  }else{
    document.getElementById("List").innerHTML = json.auth
  }
}

/**
 *フォームデータを登録する関数 
 * @pram{obj} フォームオブジェクト
 * @pram{String} 管理番号
 * @return{void}
 */
function dataAdd(formObj){
  var mgrn = document.main.mgrn.value
  alert(formObj.name + mgrn)
 // google.script.run.dataAdd(formObj,mgrn);

}



/**
 * 配列をテーブル形式に挿入
 *@pram{String[]} テーブル化する配列 
 *@return{void}
 */  

function insertJson(strArray){
 var json = JSON.parse(strArray);
 var contents = tablefunc(json);
 document.getElementById("List").innerHTML = contents;
 }

function tablefunc(dataArray) {
 var content = "<table class='type08'><thead><tr>"
              + "<th>ファイル名</th>"
              + "</tr></thead><tbody>";  
  for(var i = 0;i<dataArray.length;i++){ 
    content = content + "<tr>";
    content = content + "<th scope='row'><b>" + dataArray[i] + "</b></th>";
    content = content + "</tr>";
  }
  content = content + "</tbody></table><body>";      
  return content
}

</script>

